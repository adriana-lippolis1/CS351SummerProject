<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Login</title>
</head>
<body>
  <h1>Login Page</h1>
  <p>Please enter your username and password.</p>

  <label>Username: <input type="text" id="username"></label><br><br>
  <label>Password: <input type="password" id="password"></label><br><br>

  <button onclick="login()">Login</button>
  <button onclick="window.location.href='/'">Back to Homepage</button>
  <button onclick="window.location.href='/create-account'">Create Account</button>

  <script>
    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();

      // Get stored user
      //const storedUser = JSON.parse(localStorage.getItem('user'));

      // if (storedUser &&
      //     storedUser.username === username &&
      //     storedUser.password === password) {
      //   alert(`Welcome, ${username}! Redirecting to homepage.`);
      //   localStorage.setItem('loggedInUser', username); // Save login state
      //   window.location.href = '/';
      // } else {
      //   alert('Invalid username or password.');
      //}

      // Send login data to server for verification
      // Wait for server response
      // If successful, redirect to homepage
      fetch('/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ username, password })
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Invalid credentials');
        }
        return response.json();
      })
      .then(data => {
        alert(`Welcome, ${data.username}! Redirecting to homepage.`);
        window.location.href = '/';
      })
      .catch(err => {
        console.error(err);
        alert('Login failed: Invalid username or password.');
      });
    }
  </script>
</body>
</html>
